<form novalidate name="contentForm"
      ng-controller="Umbraco.Editors.Content.EditController"
      ng-show="loaded"
      ng-submit="save()"
      val-form-manager>

    <umb-panel ng-class="'editor-breadcrumb'">
        <umb-header tabs="content.tabs">

            <div class="span7 umb-content-headline">
                
                <small ng-if="content.masterDocId != null">Variant: <span>{{content.variantKey}}</span></small>

                <div class="umb-segment-selector" ng-if="content.masterDocId != null">
                    <a class="btn" href="" ng-click="toMasterDoc()">
                        <small>Back to master doc</small>
                        <span class="caret caret-reversed"></span>
                    </a>
                </div>

                <div class="umb-segment-selector" ng-if="content.variants.length > 0">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        <small>Variants</small>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu umb-actions pull-right" role="menu">
                        <li ng-repeat="item in content.variants" ng-class="{'trashed' : item.isTrashed}">
                            
                            <ng-form name="itemCompare">
                                
                                <a href=""
                                   ng-attr-title="{{item.exists ? 'Edit variant' : 'Create variant' }}"
                                   ng-click="selectVariant(item)">

                                    <i class="icon" ng-class="item.isTrashed ? 'icon-trash' : item.exists ? 'icon-edit' : 'icon-add'"></i>

                                    <div class="menu-label ng-binding">
                                        {{item.name}}
                                        <small ng-if="item.lastUpdated">Updated: {{item.lastUpdated | date : 'medium'}}</small>
                                        <small ng-if="!item.lastUpdated">Create new variant</small>
                                    </div>
                                </a>
                            </ng-form>
                        </li>
                        
                    </ul>
                </div>

                <umb-content-name readonly="content.masterDocId"
                                  placeholder="@placeholders_entername"
                                  ng-model="content.name" />
                


            </div>

            <div class="span5">
                <div class="btn-toolbar pull-right umb-btn-toolbar">
                    <div class="btn-group" ng-animate="'fade'" ng-show="formStatus">
                        <p class="btn btn-link umb-status-label">{{formStatus}}</p>
                    </div>

                    <umb-options-menu ng-show="currentNode"
                                      current-node="currentNode"
                                      current-section="{{currentSection}}">
                    </umb-options-menu>

                </div>
            </div>
        </umb-header>

        <umb-tab-view>
            <umb-tab id="tab{{tab.id}}" rel="{{tab.id}}" ng-repeat="tab in content.tabs">
                <div class="umb-pane">
                    <umb-property property="property"
                                  ng-repeat="property in tab.properties">
                        <umb-editor model="property"></umb-editor>
                    </umb-property>


                    <div class="umb-tab-buttons" detect-fold ng-class="{'umb-dimmed': busy}">
                        <div class="btn-group" ng-show="content.template">
                            <a class="btn" ng-click="preview(content)">
                                <localize key="buttons_showPage">Preview page</localize>
                            </a>
                        </div>

                        <div class="btn-group dropup" ng-if="defaultButton">
                            <!-- primary button -->
                            <a class="btn btn-success" href="#" ng-click="performAction(defaultButton)" prevent-default>
                                <localize key="{{defaultButton.labelKey}}">{{defaultButton.labelKey}}</localize>
                            </a>

                            <a class="btn btn-success dropdown-toggle" data-toggle="dropdown" ng-if="subButtons.length > 0">
                                <span class="caret"></span>
                            </a>


                            <!-- sub buttons -->
                            <ul class="dropdown-menu bottom-up" role="menu" aria-labelledby="dLabel" ng-if="subButtons.length > 0">
                                <li ng-repeat="btn in subButtons">
                                    <a href="#" ng-click="performAction(btn)" prevent-default>
                                        <localize key="{{btn.labelKey}}">{{btn.labelKey}}</localize>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                </div>
            </umb-tab>
        </umb-tab-view>


        <ul class="umb-panel-footer-nav nav nav-pills" ng-if="content.parentId">
            <li ng-repeat="ancestor in ancestors">
                <a href="#/content/content/edit/{{ancestor.id}}">{{ancestor.name}}</a>
            </li>
            <li></li>
        </ul>

    </umb-panel>
</form>
