<div class="umb-editor umb-listview" ng-controller="Umbraco.PropertyEditors.ListViewController" ng-switch="isNew">

   <div class="row-fluid" ng-switch-when="true">

   </div>

   <div class="row-fluid" ng-switch-when="false">

      <umb-editor-sub-header>

         <umb-editor-sub-header-content-left>

            <umb-editor-sub-header-section ng-if="listViewAllowedTypes && listViewAllowedTypes.length > 0 && !isAnythingSelected()">
               <div class="btn-group">
                   <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                       <localize key="actions_create">Create</localize>
                       <span class="caret"></span>
                   </a>
                   <ul class="dropdown-menu">
                       <li ng-repeat="contentType in listViewAllowedTypes">
                           <a href="#/{{entityType}}/{{entityType}}/edit/{{contentId}}?doctype={{contentType.alias}}&create=true">
                               <i class="icon-{{contentType.cssClass}}"></i>
                               {{contentType.name}}
                           </a>
                       </li>
                   </ul>
               </div>
            </umb-editor-sub-header-section>

            <umb-editor-sub-header-section ng-if="isAnythingSelected()">
               <umb-button
                  type="button"
                  label="Cancel"
                  action="clearSelection()"
                  disabled="actionInProgress">
               </umb-button>
            </umb-editor-sub-header-section>

            <umb-editor-sub-header-section ng-if="isAnythingSelected()">
               <strong ng-show="!actionInProgress">{{ selectedItemsCount() }} of {{ listViewResultSet.items.length }} selected</strong>
               <strong ng-show="actionInProgress" ng-bind="bulkStatus"></strong>

               <div class="umb-loader-wrapper -bottom" ng-show="actionInProgress">
                  <div class="umb-loader"></div>
               </div>
            </umb-editor-sub-header-section>

         </umb-editor-sub-header-content-left>


         <umb-editor-sub-header-content-right>

            <umb-editor-sub-header-section ng-if="!isAnythingSelected()">
               <umb-layout-selector
                  ng-if="options.layout.layouts"
                  layouts="options.layout.layouts"
                  active-layout="options.layout.activeLayout">
               </umb-layout-selector>
            </umb-editor-sub-header-section>

            <umb-editor-sub-header-section ng-if="!actionInProgress && !isAnythingSelected()">
               <form class="form-search -no-margin-bottom pull-right" novalidate>
                   <div class="inner-addon left-addon">
                       <i class="icon icon-search" ng-click="enterSearch($event)"></i>
                       <input type="text" class="form-control" localize="placeholder" placeholder="@general_typeToSearch" ng-model="options.filter" prevent-enter-submit no-dirty-check>
                   </div>
               </form>
            </umb-editor-sub-header-section>

            <umb-editor-sub-header-section ng-if="isAnythingSelected()">

               <umb-button
                  ng-if="entityType === 'content' && !isTrashed && options.allowBulkPublish"
                  type="button"
                  button-style="link"
                  label="Publish"
                  key="actions_publish"
                  icon="icon-globe"
                  action="publish()"
                  disabled="actionInProgress">
               </umb-button>

               <umb-button
                  ng-if="entityType === 'content' && !isTrashed && options.allowBulkUnpublish"
                  type="button"
                  button-style="link"
                  label="Unpublish"
                  key="actions_unpublish"
                  icon="icon-block"
                  action="unpublish()"
                  disabled="actionInProgress">
               </umb-button>

               <umb-button
                  ng-if="options.allowBulkMove"
                  type="button"
                  button-style="link"
                  label="Move"
                  key="actions_move"
                  icon="icon-enter"
                  action="move()"
                  disabled="actionInProgress">
               </umb-button>

               <umb-button
                  ng-if="options.allowBulkDelete"
                  type="button"
                  button-style="link"
                  label="Delete"
                  key="actions_delete"
                  icon="icon-trash"
                  action="delete()"
                  disabled="actionInProgress">
               </umb-button>

            </umb-editor-sub-header-section>

         </umb-editor-sub-header-content-right>

      </umb-editor-sub-header>

      <umb-list-view-layout
         content-id="contentId"
         folders="folders"
         items="listViewResultSet.items"
         selection="selection"
         options="options"
         entity-type="{{entityType}}"
         on-get-content="reloadView">
      </umb-list-view-layout>

      <umb-pagination
         ng-if="listViewResultSet.totalPages"
         page-number="options.pageNumber"
         total-pages="listViewResultSet.totalPages"
         on-next="next"
         on-prev="prev"
         on-go-to-page="goToPage">
      </umb-pagination>

        <div class="pagination" ng-show="pagination.length > 1">

           <ul>
              <li ng-class="{disabled:options.pageNumber <= 1}">
                   <a href="#" ng-click="prev()" prevent-default>
                      <localize key="general_previous">Previous</localize>
                   </a>
              </li>

              <li ng-repeat="pgn in pagination"
                   ng-class="{active:pgn.isActive}">

                   <a href="#" ng-click="goToPage(pgn.val - 1)" prevent-default
                      ng-bind="pgn.name ? pgn.name : pgn.val"
                      ng-if="pgn.val != '...'"></a>
                   <span ng-bind="pgn.val" ng-if="pgn.val == '...'"></span>
              </li>

              <li ng-class="{disabled:options.pageNumber >= listViewResultSet.totalPages}">
                   <a href="#" ng-click="next()" prevent-default>
                      <localize key="general_next">Next</localize>
                   </a>
              </li>
           </ul>

        </div>

    </div>

    <umb-overlay
      ng-if="moveDialog.show"
      model="moveDialog"
      position="right"
      view="moveDialog.view">
    </umb-overlay>

</div>
