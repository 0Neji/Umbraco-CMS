<div ng-controller="Umbraco.PropertyEditors.BlockEditorController as vm">
    <div style="position:relative" ng-if="vm.loading">
        <umb-load-indicator />
    </div>

    <div ng-if="!vm.loading">
        <umb-block-list blocks="model.value"
                        config="model.config.blocks"
                        scaffolds="vm.scaffolds"
                        on-edit="vm.onEdit(element, block)"
                        on-remove="vm.onRemove(element, block)"
                        on-settings="vm.editSettings(block)">
        </umb-block-list>
    </div>

    <div ng-if="!vm.loading" class="umb-nested-content__footer-bar">
        <a href class="umb-nested-content__add-content" ng-class="{ '--disabled': !vm.scaffolds.length }" ng-click="vm.openNodeTypePicker($event)" prevent-default>
            <localize key="grid_addElement" ng-if="vm.scaffolds.length > 1"></localize>
            <span ng-if="vm.scaffolds.length === 1">
                <localize key="general_add"></localize> {{ vm.scaffolds[0].contentTypeName }}
            </span>
        </a>
    </div>

    <umb-overlay ng-if="vm.overlayMenu.show"
                 position="target"
                 size="vm.overlayMenu.size"
                 view="vm.overlayMenu.view"
                 model="vm.overlayMenu">
    </umb-overlay>
</div>
