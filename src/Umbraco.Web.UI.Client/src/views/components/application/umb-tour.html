<div class="umb-tour">

    <div class="umb-tour__popover shadow-depth-2" ng-class="{
        'umb-tour__popover--top': position === 'top',
        'umb-tour__popover--right': position ===  'right',
        'umb-tour__popover--bottom': position ===  'bottom',
        'umb-tour__popover--left': position ===  'left'}">
        
        <div ng-if="loadingStep">
            <umb-load-indicator></umb-load-indicator>
        </div>
        
        <div ng-if="currentStepIndex < tour.steps.length && !loadingStep">
            <div class="umb-tour__title">{{ currentStep.title }}</div>
            <div class="umb-tour__content" ng-bind-html="currentStep.content"></div>
            <div class="flex justify-between items-center">
                <div class="umb-tour__step-counter">Step {{ currentStepIndex + 1 }} of {{ tour.steps.length }}</div>    
                <div>
                    <umb-button size="xs" button-style="link" type="button" action="endTour()" label="End tour"></umb-button>
                    <umb-button size="xs" ng-if="!currentStep.event" button-style="success" type="button" action="nextStep()" label="Next"></umb-button>
                </div>    
            </div>
        </div>

        <div ng-if="currentStepIndex === tour.steps.length && !loadingStep">
            <div class="umb-tour__title">WOOOHOOO!</div>
            <div class="umb-tour__content">Your completed the tour. That is amazing!</div>
            <div class="umb-tour__button-container-center">
                <umb-button type="button" button-style="success" size="xs" action="completeTour()" label="Complete"></umb-button>
            </div>
        </div>

        <div ng-if="configuredView" ng-include="configuredView"></div>

    </div>

</div>