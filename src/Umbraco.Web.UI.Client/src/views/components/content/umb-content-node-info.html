<div class="umb-package-details">
    
    <div class="umb-package-details__main-content">
        
        <umb-box>
            <umb-box-header title-key="general_links"></umb-box-header>
            <umb-box-content class="block-form">
                <ul class="nav nav-stacked" style="margin-bottom: 0;">
                    <li ng-repeat="url in node.urls">
                        <a href="{{url}}" target="_blank">
                            <i class="icon icon-window-popin"></i>
                            <span>{{url}}</span>
                        </a>
                    </li>
                </ul>
            </umb-box-content>
        </umb-box>

        <umb-box>
            <umb-box-header title-key="general_history"></umb-box-header>
            <umb-box-content class="block-form" style="position: relative;">

                <umb-load-indicator ng-if="loadingAuditTrail"></umb-load-indicator>

                <div ng-if="!loadingAuditTrail">
                    <div class="history-item" ng-repeat="item in auditTrail" ng-class="{'last-history-item': $last}">
                        <div class="history-row">
                        

                        <div class="history-item__break">
                            <div class="history-item__avatar">
                                <umb-avatar
                                    color="secondary"
                                    size="xs"
                                    name="{{item.user.name}}"
                                    img-src="{{item.user.avatars[3]}}"
                                    img-srcset="{{item.user.avatars[4]}} 2x, {{item.user.avatars[4]}} 3x">
                                </umb-avatar>
                            </div>

                            <div class="name-date-container">
                            <div>{{ item.user.name }}</div>
                            <div class="history-item__date">{{ item.date }}</div>
                            </div>
                        </div>
                            
                            <div class="history-item__break">
                                <umb-badge
                                    size="s"
                                    color="{{item.actionColor}}">
                                    {{ item.action }}
                                </umb-badge>
                                <span>{{ item.description }}</span>
                            </div>
                        </div>
                        <div class="history-line"></div>
                    </div>

                    <div class="flex justify-center">
                        <umb-pagination
                            page-number="pagination.pageNumber"
                            total-pages="pagination.totalPages"
                            on-next="nextPage"
                            on-prev="prevPage"
                            on-go-to-page="goToPage">
                        </umb-pagination>
                    </div>

                </div>

            </umb-box-content>    
        </umb-box>           
    </div>

    <div class="umb-package-details__sidebar">
        <umb-box>
            <umb-box-header title-key="general_scheduledPublishing"></umb-box-header>
            <umb-box-content class="block-form">

                <div class="date-wrapper">

                    <div class="flex items-center flex-column">
                        

                        <umb-date-time-picker
                            options="datePickerConfig"
                            on-change="datePickerChange(event, 'publish')">
                            
                            <div class="date-container">
                                
                                <div class="date-container__title">
                                    <localize key="content_releaseDate"></localize>
                                </div>

                                <div class="date-container__date" ng-if="node.releaseDate">
                                    <div class="date-wrapper__date">{{node.releaseDate | amDateFormat:'MMMM'}} {{node.releaseDate | amDateFormat:'YYYY'}}</div>
                                    <div class="date-wrapper__number">{{node.releaseDate | amDateFormat:'DD'}}</div>
                                    <div class="date-wrapper__date">{{node.releaseDate | amDateFormat:'dddd'}} {{node.releaseDate | amDateFormat:'HH:mm'}}</div>
                                </div>

                                <a href="" ng-if="!node.releaseDate" class="bold" style="color: #00aea2; text-decoration: underline;">Set date</a>                                                    
                                
                            </div>

                        </umb-date-time-picker>
                        
                        <a ng-if="node.releaseDate" ng-click="clearPublishDate()" href="" style="text-decoration: underline;">
                            <small>Clear date</small>
                        </a>

                    </div>

                    <div class="date-separate"></div>

                    <div class="flex items-center flex-column">
                        <umb-date-time-picker
                            options="datePickerConfig"
                            on-change="datePickerChange(event, 'unpublish')">

                            <div class="date-container">

                                <div class="date-container__title">
                                    <localize key="content_unpublishDate"></localize>
                                </div>
                                
                                <div class="date-container__date" ng-if="node.removeDate">
                                    <div class="date-wrapper__date">{{node.removeDate | amDateFormat:'MMMM'}} {{node.removeDate | amDateFormat:'YYYY'}}</div>
                                    <div class="date-wrapper__number">{{node.removeDate | amDateFormat:'DD'}}</div>
                                    <div class="date-wrapper__date">{{node.removeDate | amDateFormat:'dddd'}} {{node.removeDate | amDateFormat:'HH:mm'}}</div>
                                </div>

                                <a href="" ng-if="!node.removeDate" class="bold" style="color: #00aea2; text-decoration: underline;">Set date</a>

                            </div>

                        </umb-date-time-picker>

                        <a ng-if="node.removeDate" ng-click="clearUnpublishDate()" href="" style="text-decoration: underline;">
                            <small>Clear date</small>
                        </a>
                    </div>

                </div>
                

            </umb-box-content>
        </umb-box>
        <umb-box>
            <umb-box-header title-key="general_general"></umb-box-header>
            <umb-box-content class="block-form">
                
                <umb-control-group label="@template_createdDate">
                    {{node.createDate | amDateFormat:'DD'}} {{ node.createDate | amDateFormat:'MMM'}} {{ node.createDate | amDateFormat:'YYYY'}}, {{node.createDate | amDateFormat:'h:mmA'}} by {{ node.owner.name }}
                </umb-control-group>

                <umb-control-group label="@content_documentType">
                    <umb-node-preview
                        icon="documentType.icon"
                        name="documentType.linkText"
                        allow-open="allowOpen"
                        on-open="openDocumentType(documentType)">
                    </umb-node-preview>
                </umb-control-group>

                <umb-control-group label="@template_template">
                    <select
                        class="input-block-level"
                        ng-model="node.template"
                        ng-options="key as value for (key, value) in availableTemplates"
                        ng-change="updateTemplate(node.template)">
                    </select>
                </umb-control-group>

                <umb-control-group label="{{ idSection.name }}">
                    <div>{{ node.id }}</div>
                    <small>{{ node.key }}</small>
                </umb-control-group>
            </umb-box-content>    
        </umb-box>
    </div>
</div>