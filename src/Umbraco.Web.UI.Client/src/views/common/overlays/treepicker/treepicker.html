<div ng-controller="Umbraco.Overlays.TreePickerController">

    <div ng-hide="miniListViews.length > 0">

        <div class="umb-control-group">
            <umb-tree-search-box
                ng-if="enableSearh"
                hide-search-callback="hideSearch"
                search-callback="onSearchResults"
                search-from-id="{{searchInfo.searchFromId}}"
                search-from-name="{{searchInfo.searchFromName}}"
                show-search="{{searchInfo.showSearch}}"
                section="{{section}}">
            </umb-tree-search-box>
        </div>

        <umb-tree-search-results
            ng-if="searchInfo.showSearch"
            results="searchInfo.results"
            select-result-callback="selectResult">
        </umb-tree-search-results>

        <div ng-hide="searchInfo.showSearch" ng-animate="'tree-fade-out'">
            <umb-tree
                section="{{section}}"
                treealias="{{treeAlias}}"
                hideheader="{{hideHeader}}"
                hideoptions="true"
                isdialog="true"
                customtreeparams="{{customTreeParams}}"
                eventhandler="dialogTreeEventHandler"
                enablelistviewsearch="true"
                enablelistviewexpand="true"
                enablecheckboxes="{{multiPicker}}">
            </umb-tree>
        </div>

    </div>
    
    <div ng-repeat="miniListView in miniListViews" ng-animate="getMiniListViewAnimation()">

        <div class="umb-mini-list-view__title">
            <i class="umb-mini-list-view__title-icon {{ miniListView.node.icon }}"></i>
            <h4 class="umb-mini-list-view__title-text">{{ miniListView.node.name }}</h4>
        </div>

        <umb-breadcrumbs
            style="margin-bottom: 10px;"
            ng-if="breadcrumb && breadcrumb.length > 0"
            ancestors="breadcrumb"
            entity-type="content"
            on-open="clickBreadcrumb(ancestor)">
        </umb-breadcrumbs>

        <umb-mini-list-view
            node="miniListView.node"
            children="miniListView.children"
            on-select-child="selectListViewItem(child)"
            on-open-child="test(child)"
            on-search="searchMiniListView(search, miniListView)"
            loading-children="miniListView.loading">
        </umb-mini-list-view>
        
        <div class="flex justify-center">
            <umb-pagination
                ng-if="miniListView.pagination.totalPages > 0 && !miniListView.loading"
                page-number="miniListView.pagination.pageNumber"
                total-pages="miniListView.pagination.totalPages"
                on-change="goToPage(pageNumber, miniListView)">
            </umb-pagination>
        </div>

    </div>

</div>