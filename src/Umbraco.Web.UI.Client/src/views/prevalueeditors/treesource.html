<div ng-controller="Umbraco.PrevalueEditors.TreeSourceController" class="umb-editor umb-contentpicker">

	<select ng-model="model.value.type" class="umb-editor">
		<option value="content">Content</option>
		<option value="media">Media</option>
		<option value="member">Members</option>
	</select>

	<br/><br/>

	<div ng-hide="model.value.type !== 'content'">
		<ul class="unstyled list-icons" ng-if="node" >	
			<li>	
				<i class="icon icon-delete red hover-show pull-right" ng-click="clear()"></i>
				<i class="icon {{node.icon}} hover-hide"></i>
				
				<a href prevent-default ng-click="openContentPicker()" >{{node.name}}</a>
			</li>
		</ul>

			<div ng-show="multipicker || !node">	
				<span ng-hide="showSearch || model.value.query">

					<i class="icon icon-add blue"></i>
					<a href ng-click="openContentPicker()" prevent-default>
						<localize key="general_choose">Choose</localize>...
					</a>
					
					<br/>
					<a href ng-click="showSearch = true">Enter query</a>
				</span>
	
				<span ng-show="showSearch || model.value.query">
					<input type="text" 
						ng-model="model.value.query" 
						class="umb-editor umb-textstring" 
						placeholder="Enter query">

						<br/>
							
						<small>
							Available placeholders: <br/>
							<code>$current</code>: current page or closest found ancestor<br/>
							<code>$parent</code>: parent page or closest found ancestor<br/>
							<code>$root</code>: root of the content tree<br/>
							<code>$site</code>: Ancestor node at level 1 <br/>					
						</small>


						<a href ng-click="showSearch = false; model.value.query = ''; openContentPicker()"> ...Or pick a node</a>
				</span>
			</div>
	</div>
</div>